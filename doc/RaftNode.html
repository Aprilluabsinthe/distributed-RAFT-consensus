<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (10.0.2) on Tue Mar 23 23:57:49 EDT 2021 -->
<title>RaftNode</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="date" content="2021-03-23">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript" src="jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="jquery/jquery-1.10.2.js"></script>
<script type="text/javascript" src="jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RaftNode";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":9,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "./";loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="Config.NCommitted.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="RaftNode.AppendEntryReceiveOperator.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?RaftNode.html" target="_top">Frames</a></li>
<li><a href="RaftNode.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h2 title="Class RaftNode" class="title">Class RaftNode</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>RaftNode</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="lib/MessageHandling.html" title="interface in lib">MessageHandling</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">RaftNode</span>
extends java.lang.Object
implements <a href="lib/MessageHandling.html" title="interface in lib">MessageHandling</a></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.AppendEntryReceiveOperator.html" title="class in &lt;Unnamed&gt;">RaftNode.AppendEntryReceiveOperator</a></span></code></th>
<td class="colLast">
<div class="block">ReceiveOperator for each AppendEntries Send Thread</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.AppendEntrySendThread.html" title="class in &lt;Unnamed&gt;">RaftNode.AppendEntrySendThread</a></span></code></th>
<td class="colLast">
<div class="block">The Self-defined Thread for Send AppendEntry
 The leader will send HeartBeat and AppendLogs to all server/specific server
 Thus will need to construct multiple thread tasks</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.BuildReply.html" title="class in &lt;Unnamed&gt;">RaftNode.BuildReply</a></span></code></th>
<td class="colLast">
<div class="block">receiver implementations for ReqVoteArgs and AppendEntriesArgs
 This inner class is a combination of Receiver Implementation for
 
     AppendEntries RPC (&sect;5.1  &sect;5.3)
     RequestVote RPC (&sect;5.1  &sect;5.2  &sect;5.4)
 </div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.heartBeatTimerTask.html" title="class in &lt;Unnamed&gt;">RaftNode.heartBeatTimerTask</a></span></code></th>
<td class="colLast">
<div class="block">extends TimerTask abstract class for leader sending heartBeats
 <a href="https://www.iitk.ac.in/esc101/05Aug/tutorial/essential/threads/timer.html">Reference: Timer Task Reference</a>
 Send heartbeat(Empty AppendEntried RPCs) to all servers.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#RaftNode-int-int-int-">RaftNode</a></span>&#8203;(int&nbsp;port,
        int&nbsp;id,
        int&nbsp;num_peers)</code></th>
<td class="colLast">
<div class="block">construction function for RaftNode</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#checkHeartBeat--">checkHeartBeat</a></span>()</code></th>
<td class="colLast">
<div class="block">
     start chcek current Heart Beat, if no heartbeat reached within one's time out,
     start to elect itself</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#cleanThreadList--">cleanThreadList</a></span>()</code></th>
<td class="colLast">
<div class="block">synchronized helper function to clean all Leader's AppendEntries List
 including threads for heartbeat and threads for LogLists
 <a href="https://stackoverflow.com/questions/22201762/java-concurrent-clear-of-the-list">Reference: Concurrent clear of the list</a></div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="lib/Message.html" title="class in lib">Message</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#deliverMessage-lib.Message-">deliverMessage</a></span>&#8203;(<a href="lib/Message.html" title="class in lib">Message</a>&nbsp;message)</code></th>
<td class="colLast">
<div class="block">deliver Message in response to AppendEntries RPC or RequestVote RPC
 
     if is a AppendEntries RPC, reply AppendEntriesReply Message
     if is a RequestVote RPC, reply AppendEntriesReply Message
 
     Wrap all the receiver implementation in to inner class <code>BuildReply</code>
     see <code>BuildReply</code> for detailed information</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="lib/GetStateReply.html" title="class in lib">GetStateReply</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#getState--">getState</a></span>()</code></th>
<td class="colLast">
<div class="block">Construct a get state packet with given term and leader.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#leaderSendAppendEntry--">leaderSendAppendEntry</a></span>()</code></th>
<td class="colLast">
<div class="block">Send AppendEntry message to all the followers in parallel.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#main-java.lang.String:A-">main</a></span>&#8203;(java.lang.String[]&nbsp;args)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#newElection--">newElection</a></span>()</code></th>
<td class="colLast">
<div class="block">start new Election
 Role: FOLLOWER or CANDIDATE
 invoke election and nominate itself as a leader
 each team starts with a election,</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#probNSituation--">probNSituation</a></span>()</code></th>
<td class="colLast">
<div class="block">Special Case
 see Rules for Servers - Leaders - #4:
 if there exists an N such that N &gt; commitIndex, a majority of matchIndex[i] &gt;=  N
 and log[N].term == currentTerm, set commitIndex == N(&sect;5.3 , &sect;5.4)</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#refreshTerm-int-">refreshTerm</a></span>&#8203;(int&nbsp;term)</code></th>
<td class="colLast">
<div class="block">if RPC response contains term T &gt; currentTerm
 set CurrentTerm = T, convert to follower</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#setHeartBeat-boolean-">setHeartBeat</a></span>&#8203;(boolean&nbsp;heatBeatState)</code></th>
<td class="colLast">
<div class="block">synchronized set heartbeat status, be used when detecting HeartBeats
 After detected, set heartbeat status to false for next time detcting</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="lib/StartReply.html" title="class in lib">StartReply</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#start-int-">start</a></span>&#8203;(int&nbsp;command)</code></th>
<td class="colLast">
<div class="block">if command received from client, append entry to local log,
 respond after entry entry applied to state machine(&sect;5.3)</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#toFollowerState--">toFollowerState</a></span>()</code></th>
<td class="colLast">
<div class="block">Change to Follower State</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#toLeaderState--">toLeaderState</a></span>()</code></th>
<td class="colLast">
<div class="block">LEADERS initialization</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="RaftNode.html#waitForCommit-RaftNode.AppendEntryReceiveOperator-">waitForCommit</a></span>&#8203;(<a href="RaftNode.AppendEntryReceiveOperator.html" title="class in &lt;Unnamed&gt;">RaftNode.AppendEntryReceiveOperator</a>&nbsp;commitOperator)</code></th>
<td class="colLast">
<div class="block">do nothing until committed or timeout</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RaftNode-int-int-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RaftNode</h4>
<pre>public&nbsp;RaftNode&#8203;(int&nbsp;port,
                int&nbsp;id,
                int&nbsp;num_peers)</pre>
<div class="block">construction function for RaftNode
 <p>
     role start by <code>FOLLOWER</code>, <code>commitIndex</code> initialized to 0,<code>LastApplied</code> initialized to 0,
     <code>nextIndex[]</code> initialized to 1(leader last log index+1), <code>matchIndex[]</code> initialized to 0
     every node has a random election timepout, generated between <code>MIN_ELECTION_TIMEOUT</code> and <code>MAX_ELECTION_TIMEOUT</code>
     the time range can be set in <code>lib/Helper</code>
     The FOLLOWER has no heart beat
 <p>
     After constructing and initializing a RaftNode, start check current leader's heartbeat</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>port</code> - the prot to start service</dd>
<dd><code>id</code> - the id of the number</dd>
<dd><code>num_peers</code> - total number of the nodes</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="checkHeartBeat--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkHeartBeat</h4>
<pre>public&nbsp;void&nbsp;checkHeartBeat()</pre>
<div class="block"><p>
     start chcek current Heart Beat, if no heartbeat reached within one's time out,
     start to elect itself
 </p>
 <p>
     reference:<a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html"></a>
     Creates and executes a periodic action that becomes enabled first after the given initial delay,
     and subsequently with the given period; that is executions will commence after initialDelay then initialDelay+period,
     then initialDelay + 2 * period, and so on. If any execution of the task encounters an exception, subsequent executions are suppressed.
     Otherwise, the task will only terminate via cancellation or termination of the executor.
     If any execution of this task takes longer than its period, then subsequent executions may start late, but will not concurrently execute.
     usage:
     <code>
         ScheduledFuture scheduleAtFixedRate(Runnable command,
                                               long initialDelay,
                                               long period,
                                               TimeUnit unit)
     </code>
 </p></div>
</li>
</ul>
<a name="setHeartBeat-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setHeartBeat</h4>
<pre>public&nbsp;void&nbsp;setHeartBeat&#8203;(boolean&nbsp;heatBeatState)</pre>
<div class="block">synchronized set heartbeat status, be used when detecting HeartBeats
 After detected, set heartbeat status to false for next time detcting</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>heatBeatState</code> - true or false</dd>
</dl>
</li>
</ul>
<a name="newElection--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newElection</h4>
<pre>public&nbsp;void&nbsp;newElection()</pre>
<div class="block">start new Election
 Role: FOLLOWER or CANDIDATE
 invoke election and nominate itself as a leader
 each team starts with a election,</div>
</li>
</ul>
<a name="start-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;<a href="lib/StartReply.html" title="class in lib">StartReply</a>&nbsp;start&#8203;(int&nbsp;command)</pre>
<div class="block">if command received from client, append entry to local log,
 respond after entry entry applied to state machine(&sect;5.3)</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="lib/MessageHandling.html#start-int-">start</a></code>&nbsp;in interface&nbsp;<code><a href="lib/MessageHandling.html" title="interface in lib">MessageHandling</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>command</code> - the command to append.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>StartReply</dd>
</dl>
</li>
</ul>
<a name="getState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getState</h4>
<pre>public&nbsp;<a href="lib/GetStateReply.html" title="class in lib">GetStateReply</a>&nbsp;getState()</pre>
<div class="block">Construct a get state packet with given term and leader.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="lib/MessageHandling.html#getState--">getState</a></code>&nbsp;in interface&nbsp;<code><a href="lib/MessageHandling.html" title="interface in lib">MessageHandling</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>GetStateReply</dd>
</dl>
</li>
</ul>
<a name="leaderSendAppendEntry--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leaderSendAppendEntry</h4>
<pre>public&nbsp;void&nbsp;leaderSendAppendEntry()</pre>
<div class="block">Send AppendEntry message to all the followers in parallel.
 can be valid AppendEntry or empty heartbeat</div>
</li>
</ul>
<a name="waitForCommit-RaftNode.AppendEntryReceiveOperator-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForCommit</h4>
<pre>public&nbsp;void&nbsp;waitForCommit&#8203;(<a href="RaftNode.AppendEntryReceiveOperator.html" title="class in &lt;Unnamed&gt;">RaftNode.AppendEntryReceiveOperator</a>&nbsp;commitOperator)</pre>
<div class="block">do nothing until committed or timeout</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>commitOperator</code> - the AppendEntryReceiveOperator to operate</dd>
</dl>
</li>
</ul>
<a name="deliverMessage-lib.Message-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deliverMessage</h4>
<pre>public&nbsp;<a href="lib/Message.html" title="class in lib">Message</a>&nbsp;deliverMessage&#8203;(<a href="lib/Message.html" title="class in lib">Message</a>&nbsp;message)</pre>
<div class="block">deliver Message in response to AppendEntries RPC or RequestVote RPC
 <ol>
     <li>if is a AppendEntries RPC, reply AppendEntriesReply Message</li>
     <li>if is a RequestVote RPC, reply AppendEntriesReply Message</li>
 </ol>
     Wrap all the receiver implementation in to inner class <code>BuildReply</code>
     see <code>BuildReply</code> for detailed information</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="lib/MessageHandling.html#deliverMessage-lib.Message-">deliverMessage</a></code>&nbsp;in interface&nbsp;<code><a href="lib/MessageHandling.html" title="interface in lib">MessageHandling</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - the message this node receives.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The message this node should reply for the incoming message.</dd>
</dl>
</li>
</ul>
<a name="refreshTerm-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshTerm</h4>
<pre>public&nbsp;boolean&nbsp;refreshTerm&#8203;(int&nbsp;term)</pre>
<div class="block">if RPC response contains term T &gt; currentTerm
 set CurrentTerm = T, convert to follower</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>term</code> - term in request or response</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if term is updated, false otherwise</dd>
</dl>
</li>
</ul>
<a name="toLeaderState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toLeaderState</h4>
<pre>public&nbsp;void&nbsp;toLeaderState()</pre>
<div class="block">LEADERS initialization</div>
</li>
</ul>
<a name="toFollowerState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toFollowerState</h4>
<pre>public&nbsp;void&nbsp;toFollowerState()</pre>
<div class="block">Change to Follower State
 <p> can be :
     CANDIDATE discovers current LEADER or new term
     LEADER discovers sever with higher term
 </p>
 <a href="https://stackoverflow.com/questions/21492693/java-timer-cancel-v-s-timertask-cancel">References: Timer cancle</a></div>
</li>
</ul>
<a name="cleanThreadList--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanThreadList</h4>
<pre>public&nbsp;void&nbsp;cleanThreadList()</pre>
<div class="block">synchronized helper function to clean all Leader's AppendEntries List
 including threads for heartbeat and threads for LogLists
 <a href="https://stackoverflow.com/questions/22201762/java-concurrent-clear-of-the-list">Reference: Concurrent clear of the list</a></div>
</li>
</ul>
<a name="probNSituation--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>probNSituation</h4>
<pre>public&nbsp;void&nbsp;probNSituation()</pre>
<div class="block">Special Case
 see Rules for Servers - Leaders - #4:
 if there exists an N such that N &gt; commitIndex, a majority of matchIndex[i] &gt;=  N
 and log[N].term == currentTerm, set commitIndex == N(&sect;5.3 , &sect;5.4)</div>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main&#8203;(java.lang.String[]&nbsp;args)
                 throws java.lang.Exception</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="Config.NCommitted.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="RaftNode.AppendEntryReceiveOperator.html" title="class in &lt;Unnamed&gt;"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?RaftNode.html" target="_top">Frames</a></li>
<li><a href="RaftNode.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
